plugins {
    id 'java'
    id "com.github.johnrengelman.shadow" version "6.1.0"
}

group = 'org.cubewhy'
version = '1.0-SNAPSHOT'

configurations {
    include
    implementation.extendsFrom(include)
}

repositories {
    maven { url = "https://repo.lunarcn.top/repository/maven-public/" }
    mavenCentral()
}

dependencies {
    include 'org.cubewhy:LunarLauncherLib:1.3-20230816.062444-1'

    testImplementation platform('org.junit:junit-bom:5.9.1')
    testImplementation 'org.junit.jupiter:junit-jupiter'
}

test {
    useJUnitPlatform()
}

shadowJar {
    archiveClassifier.set("fatjar")
    configurations = [project.configurations.include]
    duplicatesStrategy DuplicatesStrategy.EXCLUDE

    exclude "native-binaries/**"

    exclude "LICENSE.txt"

    exclude "META-INF/maven/**"
    exclude "META-INF/versions/**"

    exclude "org/junit/**"
}

jar {
    manifest {
        attributes(
                "Main-Class": "org.cubewhy.LunarLogin"
        )
    }
}

jar.dependsOn(shadowJar)
